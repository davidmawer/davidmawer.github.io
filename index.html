<!DOCTYPE html>
<html>

<head>
    <meta charset=utf-8/>
    <title>Activity Heatmaps</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js'></script>
    <script src='leaflet-providers.js'></script>
    <link rel="stylesheet" href="mystyle.css">
    <link href='https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css' rel='stylesheet' />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
    <script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>

<body>

    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>

    <div id='map' class='dark'></div>

    <script>
        L.mapbox.accessToken = 'pk.eyJ1IjoiZG1hd2VyIiwiYSI6ImNqYW1wYWl5cTM3ZGEzM3BiNGpodWxvZzQifQ.Ct1wT5beJEMFV1MQm2sIkg';


        var map = L.mapbox.map('map', 'mapbox.dark', {
            center: [43.67, -73.77],
            zoom: 12,
            zoomSnap: 0.25
        });


        var hikeStyle = {
            "color": "#00ccff",
            "weight": 3,
            "opacity": .4,
        };

        var rideStyle = {
            "color": "#00ff00",
            "weight": 3,
            "opacity": .1,
        }

        var runStyle = {
            "color": "#ff6600",
            "weight": 3,
            "opacity": .2,
        }


        customLayerRun = L.geoJson(null, {
            style: runStyle
        }).addTo(map);
        var runsLayer = L.layerGroup([customLayerRun]);


        customLayerRide = L.geoJson(null, {
            style: rideStyle
        }).addTo(map);
        var ridesLayer = L.layerGroup([customLayerRide]);
        //        var overlayRides = {
        //            "Rides": ridesLayer //String makes button label.
        //        };

        customLayerHike = L.geoJson(null, {
            style: hikeStyle
        }).addTo(map);
        var hikesLayer = L.layerGroup([customLayerHike]);
        //        var overlayHikes = {
        //            "Hikes": HikesLayer //String makes button label.
        //        };

        var overlayMaps = {
            "Runs": runsLayer, //String makes button label.
            "Rides": ridesLayer,
            "Hikes": hikesLayer,
        };

        var toggle = L.control.layers(null, overlayMaps).addTo(map);
        //        toggle.style.backgroundColor = 'white';
        //        flyTo(center, zoom),


        //        this is just for a single button.
        var adkButton = L.easyButton('<strong>ADK</strong>', function(btn, map) {
                var adk = [43.67, -73.77];
                //            43.6529° N, 73.8013° W
                map.flyTo(adk, 10.5); // (coordinates, zoom level)
            })
            //        .addTo(map);
        var wnyButton = L.easyButton('<strong>WNY</strong>', function(btn, map) {
            var adk = [42.8, -78.6];
            //            43.6529° N, 73.8013° W
            map.flyTo(adk, 11); // (coordinates, zoom level)
        })

//        36.0464° N, 115.4039
        var vegasButton = L.easyButton('<strong>?</strong>', function(btn, map) {
            var vegas = [35.99, -115.4];
            //            43.6529° N, 73.8013° W
            map.flyTo(vegas, 12.75); // (coordinates, zoom level)
        })

        var acadiaButton = L.easyButton('<strong>?</strong>', function(btn, map) {
            var acadia = [44.34, -68.21];
            //            43.6529° N, 73.8013° W
            map.flyTo(acadia, 12.75); // (coordinates, zoom level)
        })

//        44.3386° N, 68.2733° W
        //        36.0464° N, 115.4039°

        wnyButton.button.style.width = '50px';
        wnyButton.button.style.color = 'white';
        wnyButton.button.style.backgroundColor = '#404040';
        wnyButton.addTo(map);

        adkButton.button.style.width = '50px';
        adkButton.button.style.color = 'white';
        adkButton.button.style.backgroundColor = '#404040';
        adkButton.addTo(map);

        vegasButton.button.style.width = '30px';
        vegasButton.button.style.color = 'white';
        vegasButton.button.style.backgroundColor = '#404040';
        vegasButton.addTo(map);

        acadiaButton.button.style.width = '30px';
        acadiaButton.button.style.color = 'white';
        acadiaButton.button.style.backgroundColor = '#404040';
        acadiaButton.addTo(map);

        //        var buttons = [L.easyButton('<strong>ADK</strong>', function(btn, map) {
        ////                leafletClasses: true;
        //            backgroundColor: 'black';
        //                var adk = [43.67, -73.77];
        //                map.flyTo(adk, 11)
        //            }), // (coordinates, zoom level)),
        //            L.easyButton('<strong>WNY</strong>', function(btn, map) {
        //                var wny = [42.7, -78.6];
        //                map.flyTo(wny, 11)
        //            }),
        //            L.easyButton(options3)
        //        ];

        // build a toolbar with them
        // L.easyBar(buttons).addTo(map);


//Rides folder is all rides up to and including 9/8/18
//Files 212-235 are not sorted by date accurately.        

                for (var i = 1; i < 253; i++) {
                    var rideLayer = omnivore.gpx('Rides/' + i.toString() + ".gpx", null, customLayerRide).addTo(map);
                }
        
                for (var i = 1; i < 446; i++) {
                    var runLayer = omnivore.gpx('Runs/' + i.toString() + ".gpx", null, customLayerRun).addTo(map);
                }
        //Runs folder is all runs up to and including 9/12/18
        
                for (var i = 1; i < 48; i++) {
                    var hikeLayer = omnivore.gpx('Hikes/' + i.toString() + ".gpx", null, customLayerHike).addTo(map);
                }

        //low track load for testing
//        for (var i = 1; i < 2; i++) {
//            var runLayer = omnivore.gpx('Rides/' + i.toString() + ".gpx", null, customLayerRide).addTo(map);
//        }
//
//        for (var i = 1; i < 2; i++) {
//            var runLayer = omnivore.gpx('Runs/' + i.toString() + ".gpx", null, customLayerRun).addTo(map);
//        }
//
//        for (var i = 1; i < 2; i++) {
//            var hikeLayer = omnivore.gpx('Hikes/' + i.toString() + ".gpx", null, customLayerHike).addTo(map);
//        }
    </script>

</body>


<!--https://www.mapbox.com/mapbox-gl-js/example/toggle-layers/-->

</html>